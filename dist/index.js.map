{"version":3,"file":"index.js","sources":["../src/useActiveWalletIds.js","../src/useArchivedWalletIds.js","../src/useBalances.js","../src/useBlockHeight.js","../src/useDataDump.js","../src/useDeletedWalletIds.js","../src/useEnabledTokens.js","../src/useFiatCurrencyCode.js","../src/useLocalStorage.js","../src/useLocalUsers.js","../src/useName.js","../src/useOtpKey.js","../src/useOtpResetDate.js","../src/useSyncedStorage.js"],"sourcesContent":["// @flow\n\nimport { type EdgeAccount } from 'edge-core-js'\nimport { useEffect, useState } from 'react'\n\nexport const useActiveWalletIds = (account: EdgeAccount | null | void) => {\n  const [activeWalletIds, setActiveWalletIds] = useState(account ? account.archivedWalletIds : [])\n\n  const effect = () => {\n    if (!account) return // mount with null\n    setActiveWalletIds(account.activeWalletIds) // mount with account / null -> account / accountA -> accountB (2)\n    const unsubscribe = account.watch('activeWalletIds', setActiveWalletIds) // mount with account / null -> account / accountA -> accountB (2)\n    return unsubscribe // unmount with account / accountA -> accountB (1) / account -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [account]) // onUpdate\n\n  return activeWalletIds\n}\n","// @flow\n\nimport { type EdgeAccount } from 'edge-core-js'\nimport { useEffect, useState } from 'react'\n\nexport const useArchivedWalletIds = (account: EdgeAccount | null | void) => {\n  const [archivedWalletIds, setArchivedWalletIds] = useState(account ? account.activeWalletIds : [])\n\n  const effect = () => {\n    if (!account) return // mount with null\n    setArchivedWalletIds(account.archivedWalletIds) // mount with account / null -> account / accountA -> accountB (2)\n    const unsubscribe = account.watch('archivedWalletIds', setArchivedWalletIds) // mount with account / null -> account / accountA -> accountB (2)\n    return unsubscribe // unmount with account / accountA -> accountB (1) / account -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [account]) // onUpdate\n\n  return archivedWalletIds\n}\n","// @flow\n\nimport { type EdgeBalances, type EdgeCurrencyWallet } from 'edge-core-js'\nimport { useEffect, useReducer } from 'react'\n\ntype READ_BALANCES_SUCCESS = {| balances: EdgeBalances | null, type: 'READ_BALANCES_SUCCESS' |}\ntype Action = READ_BALANCES_SUCCESS\n\ntype State = {\n  balances: EdgeBalances | null\n}\n\nconst initialState: State = {\n  balances: null\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'READ_BALANCES_SUCCESS': {\n      const { balances } = action\n      return { ...state, balances }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useBalances = (wallet: EdgeCurrencyWallet | null | void) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const effect = () => {\n    if (!wallet) return // mount with null\n\n    dispatch({ type: 'READ_BALANCES_SUCCESS', balances: wallet.balances })\n\n    const unsubscribe = wallet.watch(\n      // mount with wallet / null -> wallet / walletA -> walletB (2)\n      'balances',\n      (balances: $PropertyType<EdgeCurrencyWallet, 'balances'>) => dispatch({ type: 'READ_BALANCES_SUCCESS', balances })\n    )\n\n    return unsubscribe // unmount with wallet / walletA -> walletB (1) / wallet -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [wallet]) // onUpdate\n\n  return state.balances\n}\n","// @flow\n\nimport { type EdgeCurrencyWallet } from 'edge-core-js'\nimport { useEffect, useReducer } from 'react'\n\ntype READ_BLOCK_HEIGHT_SUCCESS = {| blockHeight: number | null, type: 'READ_BLOCK_HEIGHT_SUCCESS' |}\ntype Action = READ_BLOCK_HEIGHT_SUCCESS\n\ntype State = {\n  blockHeight: number | null\n}\n\nconst initialState: State = {\n  blockHeight: null\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'READ_BLOCK_HEIGHT_SUCCESS': {\n      const { blockHeight } = action\n      return { ...state, blockHeight }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useBlockHeight = (wallet: EdgeCurrencyWallet | null | void) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const effect = () => {\n    if (!wallet) return // mount with null\n\n    dispatch({ type: 'READ_BLOCK_HEIGHT_SUCCESS', blockHeight: wallet.blockHeight })\n\n    const unsubscribe = wallet.watch(\n      // mount with wallet / null -> wallet / walletA -> walletB (2)\n      'blockHeight',\n      (blockHeight: $PropertyType<EdgeCurrencyWallet, 'blockHeight'>) =>\n        dispatch({ type: 'READ_BLOCK_HEIGHT_SUCCESS', blockHeight })\n    )\n\n    return unsubscribe // unmount with wallet / walletA -> walletB (1) / wallet -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [wallet]) // onUpdate\n\n  return state.blockHeight\n}\n","// @flow\n\nimport { type EdgeCurrencyWallet, type EdgeDataDump } from 'edge-core-js'\nimport { useReducer } from 'react'\n\ntype READ_DATA_DUMP_START = {| type: 'READ_DATA_DUMP_START' |}\ntype READ_DATA_DUMP_SUCCESS = {| dataDump: EdgeDataDump, type: 'READ_DATA_DUMP_SUCCESS' |}\ntype READ_DATA_DUMP_ERROR = {| error: Error, type: 'READ_DATA_DUMP_ERROR' |}\ntype Action = READ_DATA_DUMP_START | READ_DATA_DUMP_SUCCESS | READ_DATA_DUMP_ERROR\n\ntype State = {\n  dataDump: EdgeDataDump | null,\n  error: Error | null,\n  pending: boolean\n}\n\nconst initialState: State = {\n  dataDump: null,\n  error: null,\n  pending: false\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'READ_DATA_DUMP_START': {\n      return { ...state, pending: true }\n    }\n    case 'READ_DATA_DUMP_SUCCESS': {\n      const { dataDump } = action\n      return { ...state, dataDump, pending: false }\n    }\n    case 'READ_DATA_DUMP_ERROR': {\n      const { error } = action\n      return { ...state, error, pending: false }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useDataDump = (wallet: EdgeCurrencyWallet | null | void) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const onSuccess = (dataDump: EdgeDataDump) => dispatch({ type: 'READ_DATA_DUMP_SUCCESS', dataDump })\n  const onError = (error: Error) => dispatch({ type: 'READ_DATA_DUMP_ERROR', error })\n\n  const getDataDump = () => {\n    if (!wallet) return\n\n    dispatch({ type: 'READ_DATA_DUMP_START' })\n    wallet\n      .dumpData()\n      .then(onSuccess)\n      .catch(onError)\n  }\n\n  return { ...state, getDataDump }\n}\n","// @flow\n\nimport { type EdgeAccount, type EdgeWalletInfoFull } from 'edge-core-js'\nimport { useEffect, useState } from 'react'\n\nconst getDeletedWalletIds = (walletInfos: Array<EdgeWalletInfoFull>) => {\n  const deletedWalletInfos: Array<EdgeWalletInfoFull> = walletInfos.filter(key => key.deleted)\n  const deletedWalletIds: Array<string> = deletedWalletInfos.map((key: EdgeWalletInfoFull) => key.id)\n\n  return deletedWalletIds\n}\n\nexport const useDeletedWalletIds = (account: EdgeAccount | null | void) => {\n  const initialState = account ? getDeletedWalletIds(account.allKeys) : []\n  const [deletedWalletIds, setDeletedWalletIds] = useState(initialState)\n\n  const effect = () => {\n    if (!account) return // mount with null\n    setDeletedWalletIds(getDeletedWalletIds(account.allKeys)) // mount with account / null -> account / accountA -> accountB (2)\n    const unsubscribe = account.watch('allKeys', allKeys => {\n      setDeletedWalletIds(getDeletedWalletIds(allKeys))\n    }) // mount with account / null -> account / accountA -> accountB (2)\n    return unsubscribe // unmount with account / accountA -> accountB (1) / account -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [account]) // onUpdate\n\n  return deletedWalletIds\n}\n","// @flow\n\nimport { type EdgeCurrencyWallet, type EdgeTokenInfo } from 'edge-core-js'\nimport { useEffect, useReducer } from 'react'\n\ntype READ_ENABLED_TOKENS_START = {| type: 'READ_ENABLED_TOKENS_START' |}\ntype READ_ENABLED_TOKENS_SUCCESS = {| enabledTokens: Array<string>, type: 'READ_ENABLED_TOKENS_SUCCESS' |}\ntype READ_ENABLED_TOKENS_ERROR = {| error: Error, type: 'READ_ENABLED_TOKENS_ERROR' |}\n\ntype ENABLE_TOKENS_START = {| type: 'ENABLE_TOKENS_START' |}\ntype ENABLE_TOKENS_SUCCESS = {| type: 'ENABLE_TOKENS_SUCCESS' |}\ntype ENABLE_TOKENS_ERROR = {| error: Error, type: 'ENABLE_TOKENS_ERROR' |}\n\ntype DISABLE_TOKENS_START = {| type: 'DISABLE_TOKENS_START' |}\ntype DISABLE_TOKENS_SUCCESS = {| type: 'DISABLE_TOKENS_SUCCESS' |}\ntype DISABLE_TOKENS_ERROR = {| error: Error, type: 'DISABLE_TOKENS_ERROR' |}\n\ntype ADD_CUSTOM_TOKEN_START = {| type: 'ADD_CUSTOM_TOKEN_START' |}\ntype ADD_CUSTOM_TOKEN_SUCCESS = {| type: 'ADD_CUSTOM_TOKEN_SUCCESS' |}\ntype ADD_CUSTOM_TOKEN_ERROR = {| error: Error, type: 'ADD_CUSTOM_TOKEN_ERROR' |}\n\ntype Action =\n  | READ_ENABLED_TOKENS_START\n  | READ_ENABLED_TOKENS_SUCCESS\n  | READ_ENABLED_TOKENS_ERROR\n  | DISABLE_TOKENS_START\n  | ENABLE_TOKENS_START\n  | ENABLE_TOKENS_SUCCESS\n  | ENABLE_TOKENS_ERROR\n  | DISABLE_TOKENS_START\n  | DISABLE_TOKENS_SUCCESS\n  | DISABLE_TOKENS_ERROR\n  | ADD_CUSTOM_TOKEN_START\n  | ADD_CUSTOM_TOKEN_SUCCESS\n  | ADD_CUSTOM_TOKEN_ERROR\n\ntype State = {\n  addCustomTokenError: Error | null,\n  addCustomTokenPending: boolean,\n\n  disableTokensError: Error | null,\n  disableTokensPending: boolean,\n\n  enableTokensError: Error | null,\n  enableTokensPending: boolean,\n\n  enabledTokens: Array<string> | null,\n\n  readEnabledTokensError: Error | null,\n  readEnabledTokensPending: boolean\n}\n\nconst initialState: State = {\n  addCustomTokenError: null,\n  addCustomTokenPending: false,\n\n  disableTokensError: null,\n  disableTokensPending: false,\n\n  enableTokensError: null,\n  enableTokensPending: false,\n\n  enabledTokens: null,\n\n  readEnabledTokensError: null,\n  readEnabledTokensPending: false\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'READ_ENABLED_TOKENS_START': {\n      return { ...state, readEnabledTokensPending: true }\n    }\n    case 'ENABLE_TOKENS_START': {\n      return { ...state, enableTokensPending: true }\n    }\n    case 'DISABLE_TOKENS_START': {\n      return { ...state, disableTokensPending: true }\n    }\n    case 'ADD_CUSTOM_TOKEN_START': {\n      return { ...state, addCustomTokenPending: true }\n    }\n\n    case 'READ_ENABLED_TOKENS_SUCCESS': {\n      const { enabledTokens } = action\n      return { ...state, enabledTokens, readEnabledTokensPending: false }\n    }\n    case 'ENABLE_TOKENS_SUCCESS': {\n      return { ...state, enableTokensPending: false }\n    }\n    case 'DISABLE_TOKENS_SUCCESS': {\n      return { ...state, disableTokensPending: false }\n    }\n    case 'ADD_CUSTOM_TOKEN_SUCCESS': {\n      return { ...state, addCustomTokenPending: false }\n    }\n\n    case 'READ_ENABLED_TOKENS_ERROR': {\n      const { error } = action\n      return { ...state, readEnabledtokensError: error, readEnabledTokensPending: false }\n    }\n    case 'ENABLE_TOKENS_ERROR': {\n      const { error } = action\n      return { ...state, enableTokensPending: false, enableTokenError: error }\n    }\n    case 'DISABLE_TOKENS_ERROR': {\n      const { error } = action\n      return { ...state, disableTokensPending: false, disableTokenError: error }\n    }\n    case 'ADD_CUSTOM_TOKEN_ERROR': {\n      const { error } = action\n      return { ...state, addCustomTokenPending: false, addCustomTokenError: error }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useEnabledTokens = (wallet: EdgeCurrencyWallet | null | void) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const enableTokens = (tokens: Array<string>) => {\n    if (!wallet) return\n\n    dispatch({ type: 'ENABLE_TOKENS_START' })\n\n    wallet\n      .enableTokens(tokens)\n      .then(() => dispatch({ type: 'ENABLE_TOKENS_SUCCESS' }))\n      .catch((error: Error) => dispatch({ type: 'ENABLE_TOKENS_ERROR', error }))\n  }\n\n  const disableTokens = (tokens: Array<string>) => {\n    if (!wallet) return\n\n    dispatch({ type: 'DISABLE_TOKENS_START' })\n\n    wallet\n      .disableTokens(tokens)\n      .then(() => dispatch({ type: 'DISABLE_TOKENS_SUCCESS' }))\n      .catch((error: Error) => dispatch({ type: 'DISABLE_TOKENS_ERROR', error }))\n  }\n\n  const addCustomToken = (tokenInfo: EdgeTokenInfo) => {\n    if (!wallet) return\n\n    dispatch({ type: 'ADD_CUSTOM_TOKEN_START' })\n\n    wallet\n      .addCustomToken(tokenInfo)\n      .then(() => dispatch({ type: 'ADD_CUSTOM_TOKEN_SUCCESS' }))\n      .catch((error: Error) => dispatch({ type: 'ADD_CUSTOM_TOKEN_ERROR', error }))\n  }\n\n  const effect = () => {\n    if (!wallet) return // mount with null\n\n    dispatch({ type: 'READ_ENABLED_TOKENS_START' })\n\n    wallet\n      .getEnabledTokens()\n      .then((enabledTokens: Array<string>) =>\n        dispatch({\n          type: 'READ_ENABLED_TOKENS_SUCCESS',\n          enabledTokens\n        })\n      )\n      .catch((error: Error) => dispatch({ type: 'READ_ENABLED_TOKENS_ERROR', error }))\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [wallet]) // onUpdate\n\n  return { ...state, enableTokens, disableTokens, addCustomToken }\n}\n","// @flow\n\nimport { type EdgeCurrencyWallet } from 'edge-core-js'\nimport { useEffect, useReducer } from 'react'\n\ntype WRITE_FIAT_CURRENCY_CODE_START = {|\n  type: 'WRITE_FIAT_CURRENCY_CODE_START'\n|}\ntype WRITE_FIAT_CURRENCY_CODE_SUCCESS = {|\n  fiatCurrencyCode: string,\n  type: 'WRITE_FIAT_CURRENCY_CODE_SUCCESS'\n|}\ntype WRITE_FIAT_CURRENCY_CODE_ERROR = {|\n  error: Error,\n  type: 'WRITE_FIAT_CURRENCY_CODE_ERROR'\n|}\ntype READ_FIAT_CURRENCY_CODE_SUCCESS = {|\n  fiatCurrencyCode: string,\n  type: 'READ_FIAT_CURRENCY_CODE_SUCCESS'\n|}\ntype Action =\n  | WRITE_FIAT_CURRENCY_CODE_START\n  | WRITE_FIAT_CURRENCY_CODE_SUCCESS\n  | WRITE_FIAT_CURRENCY_CODE_ERROR\n  | READ_FIAT_CURRENCY_CODE_SUCCESS\n\ntype State = {\n  error: Error | null,\n  fiatCurrencyCode: string | null,\n  pending: boolean\n}\n\nconst initialState: State = {\n  fiatCurrencyCode: null,\n  pending: false,\n  error: null\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'WRITE_FIAT_CURRENCY_CODE_START': {\n      return { ...state, pending: true, error: null }\n    }\n    case 'READ_FIAT_CURRENCY_CODE_SUCCESS':\n    case 'WRITE_FIAT_CURRENCY_CODE_SUCCESS': {\n      const { fiatCurrencyCode } = action\n      return { ...state, pending: false, fiatCurrencyCode }\n    }\n    case 'WRITE_FIAT_CURRENCY_CODE_ERROR': {\n      const { error } = action\n      return { ...state, pending: false, error }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useFiatCurrencyCode = (wallet: EdgeCurrencyWallet | null | void) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const onSuccess = (fiatCurrencyCode: string) => () =>\n    dispatch({ type: 'WRITE_FIAT_CURRENCY_CODE_SUCCESS', fiatCurrencyCode })\n  const onError = (error: Error) => dispatch({ type: 'WRITE_FIAT_CURRENCY_CODE_ERROR', error })\n\n  const setFiatCurrencyCode = (fiatCurrencyCode: string) => {\n    if (!wallet) return\n    dispatch({ type: 'WRITE_FIAT_CURRENCY_CODE_START' })\n    wallet\n      .setFiatCurrencyCode(fiatCurrencyCode)\n      .then(onSuccess(fiatCurrencyCode))\n      .catch(onError)\n  }\n\n  const effect = () => {\n    if (!wallet) return // mount with null\n    dispatch({\n      type: 'READ_FIAT_CURRENCY_CODE_SUCCESS',\n      fiatCurrencyCode: wallet.fiatCurrencyCode\n    })\n\n    const unsubscribe = wallet.watch(\n      // mount with wallet / null -> wallet / walletA -> walletB (2)\n      'fiatCurrencyCode',\n      (fiatCurrencyCode: $PropertyType<EdgeCurrencyWallet, 'fiatCurrencyCode'>) =>\n        dispatch({ type: 'WRITE_FIAT_CURRENCY_CODE_SUCCESS', fiatCurrencyCode })\n    )\n\n    return unsubscribe // unmount with wallet / walletA -> walletB (1) / wallet -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [wallet]) // onUpdate\n\n  return { ...state, setFiatCurrencyCode }\n}\n","// @flow\n\nimport { type EdgeAccount, type EdgeCurrencyWallet } from 'edge-core-js'\nimport { useEffect, useReducer } from 'react'\n\nexport type Stringifyable = string | number | { [string]: Stringifyable } | Array<Stringifyable>\n\ntype WRITE_START = {| type: 'WRITE_START' |}\ntype WRITE_SUCCESS = {| data: Stringifyable, type: 'WRITE_SUCCESS' |}\ntype WRITE_ERROR = {| error: Error, type: 'WRITE_ERROR' |}\ntype READ_START = {| type: 'READ_START' |}\ntype READ_SUCCESS = {| data: Stringifyable, type: 'READ_SUCCESS' |}\ntype READ_ERROR = {| error: Error, type: 'READ_ERROR' |}\ntype Action = WRITE_START | WRITE_SUCCESS | WRITE_ERROR | READ_START | READ_SUCCESS | READ_ERROR\n\ntype State = {\n  data: Stringifyable | null,\n  readError: Error | null,\n  readPending: boolean,\n  writeError: Error | null,\n  writePending: boolean\n}\n\nconst initialState: State = {\n  data: null,\n  writePending: false,\n  writeError: null,\n  readPending: false,\n  readError: null\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'WRITE_START': {\n      return { ...state, writePending: true, writeError: null }\n    }\n    case 'WRITE_SUCCESS': {\n      const { data } = action\n      return { ...state, writePending: false, data }\n    }\n    case 'WRITE_ERROR': {\n      const { error: writeError } = action\n      return { ...state, writePending: false, writeError }\n    }\n    case 'READ_START': {\n      return { ...state, readPending: true, readError: null }\n    }\n    case 'READ_SUCCESS': {\n      const { data } = action\n      return { ...state, readPending: false, data }\n    }\n    case 'READ_ERROR': {\n      const { error: readError } = action\n      return { ...state, readPending: false, readError }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useLocalStorage = (\n  storageContext: EdgeAccount | EdgeCurrencyWallet | null | void,\n  path: string | null | void\n) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const onWriteSuccess = (data: Stringifyable) => () => dispatch({ type: 'WRITE_SUCCESS', data })\n  const onWriteError = (error: Error) => dispatch({ type: 'WRITE_ERROR', error })\n  const onReadSuccess = (data: string) => dispatch({ type: 'READ_SUCCESS', data: JSON.parse(data) })\n  const onReadError = (error: Error) => dispatch({ type: 'READ_ERROR', error })\n\n  const setData = (data: Stringifyable) => {\n    if (!storageContext || !path) return\n    dispatch({ type: 'WRITE_START' })\n    storageContext.localDisklet\n      .setText(path, JSON.stringify(data))\n      .then(onWriteSuccess(data))\n      .catch(onWriteError)\n  }\n\n  const effect = () => {\n    if (!storageContext || !path) return // mount with null\n    dispatch({ type: 'READ_START' })\n    storageContext.localDisklet\n      .getText(path)\n      .then(onReadSuccess)\n      .catch(onReadError) // mount with storageContext / null -> storageContext / storageContextA -> storageContextB\n\n    const unsubscribe = storageContext.watch(\n      'localDisklet',\n      (localDisklet: $PropertyType<EdgeAccount | EdgeCurrencyWallet, 'localDisklet'>) => {\n        if (!storageContext || !path) return\n        localDisklet\n          .getText(path)\n          .then(onReadSuccess)\n          .catch(onReadError)\n      }\n    )\n\n    return unsubscribe // unmount with storageContext / storageContextA -> storageContextB (1) / storageContext -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [storageContext]) // onUpdate\n\n  return { ...state, setData }\n}\n","// @flow\n\nimport { type EdgeContext } from 'edge-core-js'\nimport { useEffect, useState } from 'react'\n\nexport const useLocalUsers = (context: EdgeContext | null | void) => {\n  const [localUsers, setLocalUsers] = useState(context ? context.localUsers : [])\n\n  const effect = () => {\n    if (!context) return // mount with null\n    const unsubscribe = context.watch('localUsers', setLocalUsers) // mount with context / null -> context / contextA -> contextB (2)\n    return unsubscribe // unmount with context / contextA -> contextB (1) / context -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [context]) // onUpdate\n\n  return localUsers\n}\n","// @flow\n\nimport { type EdgeCurrencyWallet } from 'edge-core-js'\nimport { useEffect, useReducer } from 'react'\n\ntype WRITE_NAME_START = {| type: 'WRITE_NAME_START' |}\ntype WRITE_NAME_SUCCESS = {| name: string | null, type: 'WRITE_NAME_SUCCESS' |}\ntype WRITE_NAME_ERROR = {| error: Error, type: 'WRITE_NAME_ERROR' |}\ntype READ_NAME_SUCCESS = {| name: string | null, type: 'READ_NAME_SUCCESS' |}\ntype Action = WRITE_NAME_START | WRITE_NAME_SUCCESS | WRITE_NAME_ERROR | READ_NAME_SUCCESS\n\ntype State = {\n  error: Error | null,\n  name: string | null,\n  pending: boolean\n}\n\nconst initialState: State = {\n  name: null,\n  pending: false,\n  error: null\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'WRITE_NAME_START': {\n      return { ...state, pending: true, error: null }\n    }\n    case 'READ_NAME_SUCCESS':\n    case 'WRITE_NAME_SUCCESS': {\n      const { name } = action\n      return { ...state, pending: false, name }\n    }\n    case 'WRITE_NAME_ERROR': {\n      const { error } = action\n      return { ...state, pending: false, error }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useName = (wallet: EdgeCurrencyWallet | null | void) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const onSuccess = (name: string) => () => dispatch({ type: 'WRITE_NAME_SUCCESS', name })\n  const onError = (error: Error) => dispatch({ type: 'WRITE_NAME_ERROR', error })\n\n  const setName = (name: string) => {\n    if (!wallet) return\n\n    dispatch({ type: 'WRITE_NAME_START' })\n\n    wallet\n      .renameWallet(name)\n      .then(onSuccess(name))\n      .catch(onError)\n  }\n\n  const effect = () => {\n    if (!wallet) return // mount with null\n\n    dispatch({\n      type: 'READ_NAME_SUCCESS',\n      name: wallet.name\n    })\n\n    const unsubscribe = wallet.watch(\n      // mount with wallet / null -> wallet / walletA -> walletB (2)\n      'name',\n      (name: $PropertyType<EdgeCurrencyWallet, 'name'>) => dispatch({ type: 'WRITE_NAME_SUCCESS', name })\n    )\n\n    return unsubscribe // unmount with wallet / walletA -> walletB (1) / wallet -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [wallet]) // onUpdate\n\n  return { ...state, setName }\n}\n","// @flow\n\nimport { type EdgeAccount } from 'edge-core-js'\nimport { useEffect, useState } from 'react'\n\nexport const useOtpKey = (account: EdgeAccount | null | void) => {\n  const [otpKey, setOtpKey] = useState(account ? account.otpKey : [])\n\n  const effect = () => {\n    if (!account) return // mount with null\n    setOtpKey(account.otpKey) // mount with account / null -> account / accountA -> accountB (2)\n    const unsubscribe = account.watch('otpKey', setOtpKey) // mount with account / null -> account / accountA -> accountB (2)\n    return unsubscribe // unmount with account / accountA -> accountB (1) / account -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [account]) // onUpdate\n\n  return otpKey\n}\n","// @flow\n\nimport { type EdgeAccount } from 'edge-core-js'\nimport { useEffect, useState } from 'react'\n\nexport const useOtpResetDate = (account: EdgeAccount | null | void) => {\n  const [otpResetDate, setOtpResetDate] = useState(account ? account.otpResetDate : [])\n\n  const effect = () => {\n    if (!account) return // mount with null\n    setOtpResetDate(account.otpResetDate) // mount with account / null -> account / accountA -> accountB (2)\n    const unsubscribe = account.watch('otpResetDate', setOtpResetDate) // mount with account / null -> account / accountA -> accountB (2)\n    return unsubscribe // unmount with account / accountA -> accountB (1) / account -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [account]) // onUpdate\n\n  return otpResetDate\n}\n","// @flow\n\nimport { type EdgeAccount, type EdgeCurrencyWallet } from 'edge-core-js'\nimport { useEffect, useReducer } from 'react'\n\nexport type Stringifyable = string | number | { [string]: Stringifyable } | Array<Stringifyable>\n\ntype WRITE_START = {| type: 'WRITE_START' |}\ntype WRITE_SUCCESS = {| data: Stringifyable, type: 'WRITE_SUCCESS' |}\ntype WRITE_ERROR = {| error: Error, type: 'WRITE_ERROR' |}\ntype READ_START = {| type: 'READ_START' |}\ntype READ_SUCCESS = {| data: Stringifyable, type: 'READ_SUCCESS' |}\ntype READ_ERROR = {| error: Error, type: 'READ_ERROR' |}\ntype Action = WRITE_START | WRITE_SUCCESS | WRITE_ERROR | READ_START | READ_SUCCESS | READ_ERROR\n\ntype State = {\n  data: Stringifyable | null,\n  readError: Error | null,\n  readPending: boolean,\n  writeError: Error | null,\n  writePending: boolean\n}\n\nconst initialState: State = {\n  data: null,\n  writePending: false,\n  writeError: null,\n  readPending: false,\n  readError: null\n}\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'WRITE_START': {\n      return { ...state, writePending: true, writeError: null }\n    }\n    case 'WRITE_SUCCESS': {\n      const { data } = action\n      return { ...state, writePending: false, data }\n    }\n    case 'WRITE_ERROR': {\n      const { error: writeError } = action\n      return { ...state, writePending: false, writeError }\n    }\n    case 'READ_START': {\n      return { ...state, readPending: true, readError: null }\n    }\n    case 'READ_SUCCESS': {\n      const { data } = action\n      return { ...state, readPending: false, data }\n    }\n    case 'READ_ERROR': {\n      const { error: readError } = action\n      return { ...state, readPending: false, readError }\n    }\n    default:\n      return state\n  }\n}\n\nexport const useSyncedStorage = (\n  storageContext: EdgeAccount | EdgeCurrencyWallet | null | void,\n  path: string | null | void\n) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  const onWriteSuccess = (data: Stringifyable) => () => dispatch({ type: 'WRITE_SUCCESS', data })\n  const onWriteError = (error: Error) => dispatch({ type: 'WRITE_ERROR', error })\n  const onReadSuccess = (data: string) => dispatch({ type: 'READ_SUCCESS', data: JSON.parse(data) })\n  const onReadError = (error: Error) => dispatch({ type: 'READ_ERROR', error })\n\n  const setData = (data: Stringifyable) => {\n    if (!storageContext || !path) return\n    dispatch({ type: 'WRITE_START' })\n    storageContext.disklet\n      .setText(path, JSON.stringify(data))\n      .then(onWriteSuccess(data))\n      .catch(onWriteError)\n  }\n\n  const effect = () => {\n    if (!storageContext || !path) return // mount with null\n    dispatch({ type: 'READ_START' })\n    storageContext.disklet\n      .getText(path)\n      .then(onReadSuccess)\n      .catch(onReadError) // mount with storageContext / null -> storageContext / storageContextA -> storageContextB\n\n    const unsubscribe = storageContext.watch(\n      'disklet',\n      (disklet: $PropertyType<EdgeAccount | EdgeCurrencyWallet, 'disklet'>) => {\n        if (!storageContext || !path) return\n        disklet\n          .getText(path)\n          .then(onReadSuccess)\n          .catch(onReadError)\n      }\n    )\n\n    return unsubscribe // unmount with storageContext / storageContextA -> storageContextB (1) / storageContext -> null\n  }\n\n  useEffect(effect, []) // onMount\n  useEffect(effect, [storageContext]) // onUpdate\n\n  return { ...state, setData }\n}\n"],"names":[],"mappings":";;;;;;;;;mCAK0C;;;;;;;;;;;;;;;;;;qCCAE;;;;;;;;;;;;;;;;;;;;;;;;;;;sBCWf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BCAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTuC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wCCFpC;0BACd;wBACa,8BAA8B;;;;;oCAK1B;;;;;;;;;;;;;;;;;;;;;;;;;;;ACD+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIxE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPmE;;;;;;;;;;;;;;;;;sBAuBxC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAwCN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BClEc;;;;;;;;;;;;;;;;;;;ACE+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iBA+DzD;;;;;;;;0BCjEsB;;;;;;;;;;;;;;;;;;gCCAM;;;;;;;;;;;;;;;;;;;;;ACG8B;;;;;;;;;;;;;;;;;sBAuBxC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAwCN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}